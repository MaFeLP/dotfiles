# Maintainer: MaFeLP <mafelp@proton.me>
pkgname='custom-scripts'
pkgver='1.2.0'
pkgrel='1'
pkgdesc='Some personal scripts I have written'
arch=('any')
url='https://github.com/mafelp/dotfiles'
license=('GPL3')
depends=(
  'github-cli'
  'jq'
  'libnewt'
  'openssh'
  'pacman'
  'python3'
  'coreutils'
  'uutils-coreutils'
  'texlive-core'
  'zsh'
)
optdepends=(
  'buildaur: Update AUR packages with "relax"'
  'flatpak: Update flatpak packages with "relax"'
  'rustup: Update rust toolchain with "relax"'
  'snapd: Update snap packages with "relax"'
)
source=("files.tar.gz")
sha256sums=("0f61f74a0281d7f2ab3d42c075840089bdaa1515ffda29c365d0ede4425d7e3e")

package() {
  cd "${srcdir}/files"

  for f in "ghdl" "img-convert" "relax";do
    install -Dm755 "$f" "${pkgdir}/usr/bin/$f"
  done

  cd "${srcdir}/files/buildaur/hooks"
  for hook in ./*;do
    install -Dm755 "$hook" "${pkgdir}/etc/buildaur/prehooks/$hook"
  done
  cd "${srcdir}/files/buildaur/patches"
  for patch in $(find . -name '*.patch');do
    install -Dm755 "$patch" "${pkgdir}/etc/buildaur/patches/$patch"
  done
}
